<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MADAFKAZ ‚Äî Chunsky Movie Night RSVP</title>
<style>
  :root{--bg:#0b0f1a;--panel:#0f1b2e;--accent:#ff9b3f;--text:#e9edf3;--muted:#9aa6b2;}
  *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0f1b2e,#0b0f1a);color:var(--text);
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;min-height:100dvh;display:grid;place-items:center;padding:24px}
  .card{width:min(760px,100%);background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);
    border-radius:18px;overflow:hidden;box-shadow:0 12px 40px rgba(0,0,0,.45)}
  .hero{padding:28px 24px 12px;border-bottom:1px solid rgba(255,255,255,.06)}
  .kicker{letter-spacing:.22em;text-transform:uppercase;color:#ffc46a;font-weight:800;font-size:.82rem}
  h1{margin:8px 0 4px;font-size:clamp(34px,5.5vw,56px);line-height:1.02;font-weight:900;text-transform:uppercase}
  .subtitle{margin:0;text-transform:uppercase;font-weight:800;letter-spacing:.08em;color:#ffd8a6;font-size:clamp(14px,2.2vw,18px)}
  .fine{margin:10px 0 0;color:var(--muted);font-size:12px}
  .body{padding:18px 24px 22px;display:grid;grid-template-columns:1fr auto;gap:18px;align-items:center}
  .rsvp{display:flex;gap:12px;flex-wrap:wrap}
  button{appearance:none;border:none;cursor:pointer;padding:12px 16px;border-radius:12px;font-weight:800;text-transform:uppercase;letter-spacing:.08em;font-size:14px;box-shadow:0 8px 20px rgba(0,0,0,.25)}
  .yes{background:linear-gradient(180deg,#37d27f,#17a65b);color:#052b1a}
  .no{background:linear-gradient(180deg,#ff6b6b,#e23e3e);color:#2b0707}
  .qr{display:grid;gap:6px;justify-items:center}.qr small{color:var(--muted);font-size:10px}
  .foot{display:flex;justify-content:space-between;align-items:center;gap:12px;border-top:1px solid rgba(255,255,255,.06);padding:12px 16px;font-size:12px;color:var(--muted)}
  .brand{text-transform:uppercase;letter-spacing:.14em}
  .msg{font-size:13px;margin-top:8px}.ok{color:#9ae6b4}.err{color:#ffb4b4}
  @media (max-width:560px){.body{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="card" role="group" aria-label="RSVP">
    <div class="hero">
      <div class="kicker">MADAFKAZ</div>
      <h1>CHUNSKY</h1>
      <p class="subtitle">ONE BATTLE AFTER THE OTHER</p>
      <p class="fine">Cineplexx Rudnik Ljubljana ‚Ä¢ 20:15 ‚Ä¢ Saturday, 4 Oct</p>
    </div>

    <div class="body">
      <div>
        <div class="rsvp">
          <button id="btnYes" class="yes">Yes, I‚Äôm in</button>
          <button id="btnNo"  class="no">No, can‚Äôt make it</button>
        </div>
        <div id="status" class="msg" aria-live="polite"></div>
      </div>
      <div class="qr">
        <img src="obato.jpg" alt="Coach at desk" width="300" style="border-radius:30px; box-shadow:0 4px 18px rgba(0,0,0,.25)">
        <small><a href="https://adeguilio.github.io/Faround/" style="color:#ffd27a; text-decoration:none;">Click here for RSVP page</a></small>
      </div>
    </div>

    <div class="foot">
      <span class="brand">Presented to you by E-Stave</span>
      <span>Share with friends ‚Ä¢ See you there üçø</span>
    </div>
  </div>

<script>
  // ‚úÖ 1) Set your real Formspree endpoint here
  // Get it from https://formspree.io (looks like https://formspree.io/f/xxxxabcd)
  const FORM_ENDPOINT = "https://formspree.io/f/xanpjaok"; // <-- paste here

  // Optional: turn this on to test without Formspree (should say OK)
  const TEST_MODE = false; // true = sends to httpbin to prove your browser can POST

  // UI refs
  const status = document.getElementById('status');
  const yesBtn = document.getElementById('btnYes');
  const noBtn  = document.getElementById('btnNo');

  // Helper: show messages
  function show(msg, ok=false){
    status.className = "msg " + (ok ? "ok" : "err");
    status.textContent = msg;
  }

  async function send(choice){
    yesBtn.disabled = noBtn.disabled = true;
    status.className = "msg";
    status.textContent = "Sending your RSVP‚Ä¶";

    // Build payload
    const PAGE_URL = window.location.origin + window.location.pathname.replace(/index\.html?$/,'');
    const payload = {
      event: "Madafakaz Chunsky ‚Äî One Battle After the Other",
      venue: "Cineplexx Rudnik Ljubljana",
      time: "20:15",
      stamp: new Date().toISOString(),
      response: choice,
      page: PAGE_URL
    };

    try {
      const url = TEST_MODE
        ? "https://httpbin.org/post"            // proves your browser can POST
        : (FORM_ENDPOINT || "");                // your real endpoint

      if (!url){
        // No endpoint configured ‚Üí pretend success so UX still works
        await new Promise(r=>setTimeout(r,300));
        show(choice==="Yes" ? "‚úÖ Thanks! See you at 20:15!" : "üëå All good ‚Äî maybe next time!", true);
        return;
      }

      const res = await fetch(url, {
        method: "POST",
        mode: "cors",
        headers: { "Content-Type": "application/json", "Accept": "application/json" },
        body: JSON.stringify(payload)
      });

      // Formspree returns 200 or 2xx on success
      if (!res.ok){
        // Try to read error details (Formspree includes JSON)
        let detail = "";
        try { const j = await res.json(); if (j && j.error) detail = " ‚Äî " + j.error; } catch {}
        throw new Error("HTTP " + res.status + detail);
      }

      show(choice==="Yes" ? "‚úÖ Thanks! See you at 20:15!" : "üëå All good ‚Äî maybe next time!", true);

    } catch (e){
      console.error(e);
      // Common causes with quick hints:
      // - Wrong FORM_ENDPOINT (typo)
      // - Domain not allowed in Formspree (add https://adeguilio.github.io)
      // - Email not verified on Formspree
      show("‚ö†Ô∏è Couldn't send RSVP. Check endpoint/CORS/verification and try again.");
      yesBtn.disabled = noBtn.disabled = false;
    }
  }

  document.getElementById('btnYes')?.addEventListener('click', ()=>send("Yes"));
  document.getElementById('btnNo') ?.addEventListener('click', ()=>send("No"));
</script>
</body>
</html>
